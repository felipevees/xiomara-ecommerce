{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio{% endblock %}
{% block head2 %}
<style>
  #carouselExampleCaptions {
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
  }

  .carousel-indicators {
    position: absolute !important;
    bottom: -40px;
  }

  .carousel-indicators button {
    background-color: #0B4B88 !important;
    width: 10px !important;
    height: 10px !important;
    border-radius: 50% !important;
  }

  @media (max-width: 640px) {
    .uk-slider-items .uk-child-width-1-4 {
      width: calc(33.33% - 10px) !important;
    }
  }


  .bg-circle {
    position: absolute;
    background-color: #2d2f31e0;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    z-index: 0;
    left: -10%;
  }

  @media (max-width: 500px) {
    .bg-circle {
      display: none;
    }
  }


  .cards-container {
    display: flex;
    justify-content: center !important;
    align-items: center !important;
    flex-direction: row !important;
    flex-wrap: wrap;
    margin-top: 10px;
    margin-bottom: 150px !important;
  }

  .Card {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-basis: calc(33.33% - 20px);
    margin: 10px;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  .Card:hover {
    transform: scale(1.03);
  }


  .uk-card {
    max-height: fit-content;
    border-radius: 12px;
    width: 100%;
    overflow: hidden;
    background-color: #d7d7d7;
  }

  .uk-card-media-top {
    width: 100%;
    height: 200px;
    overflow: hidden;
    background-size: contain;
    background-position-x: center;
    background-repeat: no-repeat;
    padding: 10px 30px;
    padding-top: 40px !important;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .product-image {
    border-radius: 10px;
    max-height: 300px;
  }

  .uk-card-body {
    padding: 20px 30px;
  }


  .uk-card-body2 {
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .price-btn {
    background-color: #0B4B88;
    color: #d7d7d7;
    padding: 8px 12px;
    width: fit-content;
    border: none;
    border-radius: 25px;
  }

  .h3-card {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .h3-card1 {
    display: flex;
    justify-content: start;
    align-items: center;
  }

  .cards-main-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .img-carousel-border-responsive{
    border-radius: 15px;
  }

  @media (min-width: 1000px) {
    .Card {
      flex-basis: calc(30% - 20px);


    }

    .banner-container {
      max-width: 1260px !important;
    }
  }

  @media (max-width: 767px) {
    .Card {
      flex-basis: calc(20% - 20px);
    }
    .img-carousel-border-responsive{
      border-radius: 0px;
    }

  }

  @media (max-width: 450px) {
    .Card {
      flex-basis: 100%;
    }
  }
</style>
{%endblock%}

{% block banner %}
<div class="banner-container" style=" margin: auto;">
  <div id="carouselExampleCaptions" class="carousel slide banner-container" data-bs-touch="true"
    data-bs-interval="false">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
        aria-label="Slide 3"></button>

    </div>
    <div class="carousel-inner">
      <div class="carousel-item active" style="overflow: hidden;">
        <img class="img-carousel-border-responsive img-carousel" src="{% static 'admin/img/carousel1.jpg' %}"
          class="d-block w-100" alt="First Slide">

      </div>
      <div class="carousel-item" style="overflow: hidden;">
        <img class="img-carousel-border-responsive img-carousel" src="{% static 'admin/img/carousel1.jpg' %}"
          class="d-block w-100" alt="Second Slide">

      </div>
      <div class="carousel-item" style="overflow: hidden;">
        <img class="img-carousel-border-responsive img-carousel" src="{% static 'admin/img/carousel1.jpg' %}"
          class="d-block w-100" alt="Third Slide">

      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>


{% endblock %}

{% block content %}
<div class="container-md my-5">
  <div style="height: fit-content;">

    <div class="uk-position-relative uk-visible-toggle uk-light mb-5 " tabindex="-1" uk-slider>
      <ul style="display: flex; justify-content: center; align-items: center;"
        class="uk-slider-items uk-child-width-1-3 uk-child-width-1-4@s uk-child-width-1-4@m uk-child-width-1-5@l">
        {% for item in categorias %}
        <li class="uk-flex uk-flex-center">
          <form action="{% url 'category' %}" method="post" class="category-form">
            {% csrf_token %}
            <input type="hidden" name="category" value="{{ item.nombre }}">
            <button type="submit" class="category-button "
              style="background-color: #0B4B88;border:none; font-size: 18px; font-weight: 400; min-width:100px;  width: fit-content; height: 60px; border-radius: 11px; color: white;">
              {{ item.nombre }}
            </button>
          </form>
        </li>
        {% endfor %}
      </ul>
      <a class="uk-position-center-left uk-position-small uk-hidden-hover" href uk-slidenav-previous
        uk-slider-item="previous"></a>
      <a class="uk-position-center-right uk-position-small uk-hidden-hover" href uk-slidenav-next
        uk-slider-item="next"></a>
    </div>
  </div>
  <div class="col-12 mb-4 " style="display: flex; justify-content: center; align-items: center; ">
    <h3 style="color:#0B4B88; font-size: 22px;" class="mb-1">Productos Recientes</h3>
  </div>
  <div class="cards-main-container">
    <div class="cards-container">
      {% for item in products %}
      <a href="{% url 'information' item.id %}" class=" Card">
        <div class="col-12 px-3">
          <div class="uk-card uk-card-default h-100"
            style="max-height: fit-content; border-radius: 35px; min-width: 250px;">

            <div class="uk-card-media-top" style=" height: fit-content;">
              <img class="product-image" src="{{ item.imagenes.first.imagen.url }}" alt="{{ item.nombre }} Image">
            </div>
            <div class="uk-card-body pt-2">
              <div class="h3-card1">
                <h3 class="h3-card" style="color: #0B4B88;" class="uk-card-title">{{ item.nombre }}</h3>
              </div>
              <p>{{ item.short_desc|slice:"100" }}{% if item.short_desc|length > 100 %}...{% endif %}</p>
            </div>
            <div class="uk-card-body2 pt-2">
              <div class="h3-card">
                <h3 style="color: #0B4B88; ">$ {{item.precio}}</h3>
              </div>
              <button class="price-btn">Añadir</button>
            </div>
          </div>
        </div>
      </a>
      {% endfor %}
      <button style="background-color: #0B4B88 !important; " id="showMoreBtn" class="btn btn-primary mt-3">Mostrar más
        productos</button>
    </div>
  </div>
</div>

{%endblock%}

{% block script %}
<script>
  $(document).ready(function () {

    var productsToShow = 9;
    var productsIncrement = 9;


    var productsContainer = $('.cards-container');


    productsContainer.find('.Card:gt(' + (productsToShow - 1) + ')').hide();


    $('#showMoreBtn').on('click', function () {

      productsToShow += productsIncrement;
      productsContainer.find('.Card:lt(' + productsToShow + ')').show();


      if (productsContainer.find('.Card:visible').length >= productsContainer.find('.Card').length) {
        $(this).hide();
      }
    });

  });

</script>
{%endblock%}